<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <!-- Carga Bootstrap 5 desde CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Carga Font Awesome para iconos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  <!-- INCLUYE ESTILOS (StylesComprobante.html) -->
  <?!= include('StylesComprobante'); ?>
</head>
<body class="bg-light">

<div class="app-container bg-white shadow-lg rounded p-4">
    <h1 class="text-center text-primary mb-4">üìù Generador de Comprobantes de Asistencia</h1>
    
    <!-- √Årea del Formulario -->
    <div id="formArea" class="no-print">
        <form id="comprobanteForm">
            <div class="row g-3">
                
                <!-- Datos del Paciente -->
                <h5 class="mt-3 text-primary">Datos del Paciente Principal</h5>
                <div class="col-md-6">
                    <label for="nombre" class="form-label">Nombre Completo del Paciente</label>
                    <input type="text" class="form-control" id="nombre" name="nombre" required>
                </div>
                <div class="col-md-6">
                    <label for="cedula" class="form-label">C√©dula del Paciente</label>
                    <input type="text" class="form-control" id="cedula" name="cedula" pattern="[0-9\-]+" title="Solo n√∫meros y guiones son permitidos" required>
                </div>

                <!-- Opcion Acompa√±ante (Checkbox) -->
                <div class="col-12 companion-section">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="generarAcompanante" name="generarAcompanante">
                        <label class="form-check-label" for="generarAcompanante">
                            Generar comprobante para un acompa√±ante
                        </label>
                    </div>
                </div>

                <!-- Campos Acompa√±ante (Inicialmente Ocultos) -->
                <div id="acompanianteFields" class="row g-3" style="display: none;">
                    <h5 class="mt-3 text-success">Datos del Acompa√±ante</h5>
                    <div class="col-md-6">
                        <label for="acompanianteNombre" class="form-label">Nombre Completo del Acompa√±ante</label>
                        <input type="text" class="form-control" id="acompanianteNombre" name="acompanianteNombre">
                    </div>
                    <div class="col-md-6">
                        <label for="acompanianteCedula" class="form-label">C√©dula del Acompa√±ante</label>
                        <input type="text" class="form-control" id="acompanianteCedula" name="acompanianteCedula" pattern="[0-9\-]+" title="Solo n√∫meros y guiones son permitidos">
                    </div>
                </div>
                
                <!-- DETALLES DE LA CITA -->
                <h5 class="mt-3 text-primary">Detalles de la Cita</h5>

                <!-- Fecha y Tipo de Cita -->
                <div class="col-md-6">
                    <label for="fecha" class="form-label">Fecha de la Cita</label>
                    <input type="date" class="form-control" id="fecha" name="fecha" required>
                </div>
                <div class="col-md-6">
                    <label for="tipoCita" class="form-label">Tipo de Cita</label>
                    <select class="form-select" id="tipoCita" name="tipoCita" required>
                        <option value="" disabled selected>Seleccione el tipo de cita</option>
                        <option value="consulta de endocrinolog√≠a">Consulta de Endocrinolog√≠a</option>
                        <option value="gastroscopia">Gastroscopia</option>
                        <option value="colonoscopia">Colonoscopia</option>
                        <option value="gastrocolonoscopia">Gastrocolonoscopia</option>
                        <option value="consulta de gastroenterolog√≠a">Consulta de Gastroenterolog√≠a</option>
                        <option value="Consulta de nutrici√≥n">Consulta de Nutrici√≥n</option>
                        <option value="cita para ultrasonido">Cita para Ultrasonido</option>
                        <option value="consulta m√©dica">Consulta M√©dica General</option>
                    </select>
                </div>
                
                <!-- Especialista -->
                <div class="col-12">
                    <label for="especialista" class="form-label">Especialista (Dr./Dra.)</label>
                    <input type="text" class="form-control" id="especialista" name="especialista" required>
                </div>

                <!-- Horario (usando input type="time" para cualquier minuto) -->
                <div class="col-md-6">
                    <label for="horaInicio" class="form-label">Hora de Llegada (Hora y Minuto)</label>
                    <input type="time" class="form-control" id="horaInicio" name="horaInicio" required>
                </div>
                <div class="col-md-6">
                    <label for="horaFin" class="form-label">Hora de Salida (Hora y Minuto)</label>
                    <input type="time" class="form-control" id="horaFin" name="horaFin" required>
                </div>

            </div>

            <button type="submit" class="btn btn-primary w-100 mt-4">Generar Comprobante</button>
        </form>
    </div>

    <!-- √Årea de Resultado y Impresi√≥n -->
    <div id="resultArea" class="mt-4" style="display: none;">
        <h3 class="text-center text-success mb-3">‚úÖ Comprobante Generado</h3>
        
        <!-- Contenedor del Comprobante para Impresi√≥n -->
        <div id="printArea" class="border p-4 mb-3" style="min-height: 250px;">
            <!-- El contenido del comprobante se insertar√° aqu√≠ -->
        </div>

        <div class="no-print d-grid gap-2">
            <button class="btn btn-success" onclick="window.print()">üñ®Ô∏è Imprimir Comprobante</button>
            <button class="btn btn-secondary" onclick="resetForm()">‚Ü©Ô∏è Generar Nuevo</button>
        </div>
    </div>
    
    <!-- √Årea de Mensajes de Estado/Error -->
    <div id="statusMessage" class="mt-3 alert d-none" role="alert"></div>

</div>

<!-- INCLUYE SCRIPT (ScriptComprobante.html) -->
<?!= include('ScriptComprobante'); ?>

</body>
</html>