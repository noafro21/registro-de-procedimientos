<!DOCTYPE html>
<html lang="es" xml:lang="es">

<head>
    <title>Reporte de Pago de Ultrasonidos</title>
    <base target="_top">
    <?!= include('stylesReportePagoUltrasonido') ?>
    <?!= include('stylesBotonRegresar') ?>
</head>

<body>
    <!-- Botón para volver al menú principal -->
    <button class="back-button" onclick="volverAlMenu()" title="Volver al Menú Principal">
        <span class="back-button-icon">←</span>
    </button>

    <div id="reportControls">
        <h2>Reporte de Radiología</h2>

        <!-- ✅ MENSAJE DE STATUS DINÁMICO -->
        <div id="formMessage" class="message-container"></div>

        <label for="radiologo">Seleccione radiólogo:</label>
        <select id="radiologo">
            <option disabled selected value="">Cargando radiólogos...</option>
        </select>
        <button type="button" onclick="cargarEmailPersonal()" class="btn-small">📧 Cargar Email</button>

        <!-- ✅ SELECTORES MEJORADOS - Se inicializarán dinámicamente -->
        <label for="mes">Mes:</label>
        <select id="mes">
            <option disabled value="">Seleccione un mes</option>
            <!-- Se llenarán dinámicamente -->
        </select>

        <label for="anio">Año:</label>
        <select id="anio">
            <option disabled value="">Seleccione un año</option>
            <!-- Se llenarán dinámicamente -->
        </select>

        <label for="quincena">Quincena:</label>
        <select id="quincena">
            <option disabled value="">Seleccione una quincena</option>
            <!-- Se llenarán dinámicamente -->
        </select>

        <!-- ✅ BOTONES DE ACCIÓN MEJORADOS -->
        <div class="action-buttons">
            <button type="button" onclick="calcularPagos()" class="btn-primary">📊 Calcular Reporte</button>
            <button type="button" onclick="actualizarSelectoresFecha()" class="btn-secondary">🔄 Actualizar
                Fechas</button>
            <button type="button" onclick="mostrarAyudaFechas()" class="btn-secondary">❓ Ayuda</button>
        </div>

        <!-- ✅ DESCRIPCIÓN DINÁMICA -->
        <div class="selection-info">
            <strong>Período seleccionado:</strong> <span id="descripcionSeleccion">Ninguna - Complete todos los
                campos</span>
        </div>
    </div>

    <!-- ✅ CONTENIDO DEL REPORTE IMPRIMIBLE -->
    <div id="printableReportContent">
        <div id="resultado"></div>
    </div>

    <!-- ✅ SECCIÓN DE ACCIONES PARA ENVIAR/DESCARGAR -->
    <div id="action-section" class="action-section">
        <h3>Opciones de Reporte</h3>
        <div class="action-row">
            <div class="form-group">
                <label for="emailRecipient">Email destinatario:</label>
                <input type="email" id="emailRecipient" placeholder="ejemplo@dominio.com" />
            </div>
            <div class="action-buttons">
                <button onclick="enviarReporteUltrasonido()" class="btn-enviar">📧 Enviar Reporte</button>
                <button onclick="descargarReporteUltrasonidoPDF()" class="btn-descargar">📥 Descargar PDF</button>
            </div>
        </div>
        <div id="emailMessage" class="message-container"></div>
    </div>

    <!-- ✅ SCRIPT PRINCIPAL -->
    <?!= include('scriptReportePagoUltrasonido') ?>
    <?!= include('scriptBotonRegresar') ?>
</body>

</html>