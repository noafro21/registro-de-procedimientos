<!DOCTYPE html>
<html>

<head>
    <title>Buscar Biopsias</title>
    <base target="_top">
    <?!= include('stylesBuscarBiopsias'); ?>
    <?!= include('stylesBotonRegresar'); ?>
</head>

<body>
  <!-- Bot√≥n para volver al men√∫ principal -->
    <button class="back-button" onclick="volverAlMenu()" title="Volver al Men√∫ Principal">
        <span class="back-button-icon">‚Üê</span>
    </button>
    <div class="container">
        <h1>B√∫squeda y Reporte de Biopsias</h1>

        <div class="search-section">
            <h2>Buscar Biopsias</h2>
            <div class="search-options">
                <div class="radio-group">
                    <label>
                        <input type="radio" name="searchType" value="fecha" id="radio_fecha" checked>Por Fecha
                    </label>
                    <label>
                        <input type="radio" name="searchType" value="cedula" id="radio_cedula">
                        Identificaci√≥n
                    </label>
                    <label>
                        <input type="radio" name="searchType" value="nombre" id="radio_nombre">
                        Nombre
                    </label>
                    <label>
                        <input type="radio" name="searchType" value="mes" id="radio_mes">
                        Por Mes/A√±o
                    </label>
                    <label>
                        <input type="radio" name="searchType" value="estado" id="radio_estado">
                        Estado de Muestra
                    </label>
                </div>
                <div class="search-inputs">
                    <input type="date" id="search_fecha" class="search-input">
                    <input type="text" id="search_cedula" class="search-input" placeholder="C√©dula, pasaporte o DIMEX"
                        style="display: none;">
                    <input type="text" id="search_nombre" class="search-input" placeholder="Ingrese nombre del cliente"
                        style="display: none;">

                    <div id="mes_inputs" class="mes-group" style="display: none;">
                        <select id="search_mes" class="search-input">
                            <option value="">Seleccione mes...</option>
                            <option value="1">Enero</option>
                            <option value="2">Febrero</option>
                            <option value="3">Marzo</option>
                            <option value="4">Abril</option>
                            <option value="5">Mayo</option>
                            <option value="6">Junio</option>
                            <option value="7">Julio</option>
                            <option value="8">Agosto</option>
                            <option value="9">Septiembre</option>
                            <option value="10">Octubre</option>
                            <option value="11">Noviembre</option>
                            <option value="12">Diciembre</option>
                        </select>
                        <!--<select id="search_anio" class="search-input">
                            <option value="2023">2023</option>
                            <option value="2024">2024</option>
                            <option value="2025" selected>2025</option>
                            <option value="2026">2026</option>
                        </select>-->
                    </div>

                    <select id="search_estado" class="search-input" style="display: none;">
                        <option value="">Seleccione estado...</option>
                        <option value="registrada">üìù Registrada</option>
                        <option value="recibida">üì¶ Recibida</option>
                        <option value="enviada">üì§ Enviada</option>
                        <option value="completada">‚úÖ Completada</option>
                    </select>
                    <button id="btnBuscar" type="button">üîç Buscar</button>
                </div>
            </div>
            <div id="resultsMessage" class="message-area"></div>
        </div>

        <div class="report-section">
            <h2>Generar Reporte Mensual</h2>
            <div class="report-options">
                <div class="select-group">
                    <label for="reportMes">Mes:</label>
                    <select id="reportMes">
                        <option value="1">Enero</option>
                        <option value="2">Febrero</option>
                        <option value="3">Marzo</option>
                        <option value="4">Abril</option>
                        <option value="5">Mayo</option>
                        <option value="6">Junio</option>
                        <option value="7">Julio</option>
                        <option value="8">Agosto</option>
                        <option value="9">Septiembre</option>
                        <option value="10">Octubre</option>
                        <option value="11">Noviembre</option>
                        <option value="12">Diciembre</option>
                    </select>
                    <label for="reportAnio">A√±o:</label>
                    <select id="reportAnio">
                        <option value="2023">2023</option>
                        <option value="2024" selected>2024</option>
                        <option value="2025">2025</option>
                    </select>
                    <button id="btnReporteMensual" class="btn-primary">Generar Reporte</button>
                </div>
            </div>
        </div>

        <div class="results-section">
            <h2 id="reportTitle">Resultados de la B√∫squeda</h2>
            <div id="searchMessage" class="message-area"></div>
            <div id="resultado_busqueda" class="results-container"></div>

            <div id="paginationControls" style="display: none; text-align: center; margin-top: 20px;">
                <button id="prevPage" class="btn-secondary" disabled>Anterior</button>
                <span id="pageInfo">P√°gina 1 de 1</span>
                <button id="nextPage" class="btn-secondary" disabled>Siguiente</button>
                <select id="pageSize" style="margin-left: 15px;">
                    <option value="10">10 por p√°gina</option>
                    <option value="25">25 por p√°gina</option>
                    <option value="50">50 por p√°gina</option>
                </select>
            </div>
            <div id="action-section" class="action-buttons">
                <button id="btnDescargarPDF" class="btn-secondary">Descargar PDF</button>
                <div id="emailMessage" class="message-area"></div>
            </div>
        </div>
    </div>

    <div id="loadingOverlay" style="display: none;">
        <div class="spinner"></div>
        <p>Cargando...</p>
    </div>
    <?!= include('scriptBuscarBiopsias'); ?>
    <?!= include('scriptBotonRegresar'); ?>
</body>

</html>