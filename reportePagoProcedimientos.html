<!DOCTYPE html>
<html>

<head>
    <base target="_top">
    <?!= include('stylesReportePagoProcedimientos') ?>
    <?!= include('stylesBotonRegresar') ?>
</head>

<body>
    <!-- Botón para volver al menú principal -->
    <button class="back-button" onclick="volverAlMenu()" title="Volver al Menú Principal">
        <span class="back-button-icon">←</span>
    </button>

    <div id="reportControls">
        <h2>Reporte de Procedimiento</h2>
        <label for="doctor">Seleccione personal:</label>
        <select id="doctor">
            <option disabled selected value="">Cargando personal...</option>
        </select>

        <label for="mes">Mes:</label>
        <select id="mes">
            <option value="1">Enero</option>
            <option value="2">Febrero</option>
            <option value="3">Marzo</option>
            <option value="4">Abril</option>
            <option value="5">Mayo</option>
            <option value="6">Junio</option>
            <option value="7">Julio</option>
            <option value="8">Agosto</option>
            <option value="9">Septiembre</option>
            <option value="10">Octubre</option>
            <option value="11">Noviembre</option>
            <option value="12">Diciembre</option>
        </select>

        <label for="anio">Año:</label>
        <select id="anio">
            <option value="2025">2025</option>
            <option value="2024">2024</option>
            <option value="2023">2023</option>
        </select>

        <label for="quincena">Quincena:</label>
        <select id="quincena">
            <option value="completo">Mes Completo</option>
            <option value="1-15">1 al 15</option>
            <option value="16-31">16 al 31</option>
        </select>

        <button type="button" onclick="calcular()">Calcular</button>
    </div>

    <div id="printableReportContent">
        <h2 id="reportTitle"></h2>
        <div id="resultado"></div>
        <div class="totales-container">
            <h3 class="totales-title">Resumen de Totales</h3>
            <table class="totales-table">
                <tr>
                    <td class="label-td">Subtotal original:</td>
                    <td class="value-td"><span id="subtotalOriginal"></span></td>
                </tr>
                <tr class="solo-pantalla">
                    <td class="label-td">Descuento aplicado:</td>
                    <td class="value-td">
                        <input type="number" id="montoDescontar" min="0" placeholder="Monto a descontar">
                        <span id="montoDescontarTexto"></span>
                    </td>
                </tr>
                <tr class="solo-pantalla">
                    <td class="label-td">Extra (₡):</td>
                    <td class="value-td">
                        <input type="number" id="montoExtra" min="0" step="0.01" value="0">
                        <span id="montoExtraTexto"></span>
                    </td>
                </tr>
                <tr class="solo-pantalla">
                    <td class="label-td">Motivo del descuento o extra:</td>
                    <td class="value-td">
                        <input type="text" id="motivoDescuento" placeholder="Motivo del descuento">
                        <span id="motivoDescuentoTexto"></span>
                    </td>
                </tr>
                <tr>
                    <td class="label-td">Subtotal con descuento:</td>
                    <td class="value-td"><span id="subtotalConDescuento"></span></td>
                </tr>
                <tr class="grand-total-row">
                    <td>GRAN TOTAL:</td>
                    <td><span id="granTotal"></span></td>
                </tr>
            </table>
            <div id="comentarioDescuento"></div>
        </div>
    </div>

    <div id="action-section">
        <h3>Opciones de Reporte</h3>
        <label for="emailRecipient">Email Destinatario:</label>
        <input type="email" id="emailRecipient" placeholder="ejemplo@dominio.com" required />
        <button onclick="enviarReporteCostos()">Enviar Reporte</button>
        <button onclick="descargarReporteCostosPDF()">Descargar PDF</button>
        <div id="emailMessage"></div>
    </div>

    <?!= include('scriptReportePagoProcedimientos'); ?>
    <?!= include('scriptBotonRegresar'); ?>
</body>

</html>